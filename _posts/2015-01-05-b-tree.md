---
layout: post
title: 数据结构：B-tree
category: 数据结构
tags: [数据结构,B-tree]
---

###B-tree简介
B-tree是一种树形的数据结构，类似于[二叉搜索树](http://en.wikipedia.org/wiki/Binary_search_tree)，但每个节点可以有多于2个的子节点。因此，二叉搜索树的性质B-tree也都有，但B-tree在磁盘数据访问上有更多地优势。我们知道，CPU访问内存的速度远比磁盘快，然而内存的容量有限，很多时候要操作的数据在内存中无法一次性全部装载，因此需要辅助存储器，然而使用辅助存储器导致的问题是寻找数据的时间远超过处理数据的时间。那么如何在辅助存储器中快速定位需要的数据？B-tree正是为这种需求而设计，它由Rudolf Bayer and Ed McCreight 于1971年发明，(B-tree中的“B”字具体指什么已经没有记载了)，可以以树的高度(磁盘seek)和内部节点key的个数(磁盘rotate)作为调整参数来缩短定位时间。

###B-tree定义
什么样的树是B-tree？定义一个节点[key，data]，key记录键值，不同的记录key值必须不同，data记录除key以外的数据，d为预先设定的任意一个大于1的正整数，定义为树的度(指向子节点的指针数量)，h为数的高度，那么B-tree应该满足如下的约束条件：

* 节点中的key按照非递减的顺序排好序。
* key和指针互相间隔，节点两端是指针，每个指针要么为null，要么指向另外一个节点。
* 所有叶节点具有相同的深度，等于树的高度。
* 如果某个指针在节点node最左边且不为null，则其指向节点的所有key小于v(key1)，其中v(key1)为node的第一个key的值。
* 如果某个指针在节点node最右边且不为null，则其指向节点的所有key大于v(keym)，其中v(keym)为node的最后一个key的值。
* 如果某个指针在节点node的左右相邻key分别是keyi和keyi+1且不为null，则其指向节点的所有key小于v(keyi+1)且大于v(keyi)。
* 非叶子节点key的数量n-1，指针数量为n，那么n与树的度d满足约束：d<=n<=2d。
* 叶子节点最少包含一个key和两个指针，最多包含2d-1个key和2d个指针，叶节点的指针均为null 。

下图为一个符合要求的B-tree：

![b-tree](/assets/images/b-tree.png)

###B-tree算法

####查找

####插入

####删除

###参考
1、D Comer, Ubiquitous B-tree; ACM Computing Surveys (CSUR), 1979

2、[B-tree](http://en.wikipedia.org/wiki/B-tree)

3、[MySQL索引背后的数据结构及算法原理](http://blog.codinglabs.org/articles/theory-of-mysql-index.html)







